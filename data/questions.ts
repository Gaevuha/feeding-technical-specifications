import { QuestionType, Category } from "@/types/quiz";

// ✅ Перемішування масиву (Fisher–Yates)
function shuffle<T>(array: T[]): T[] {
  const arr = [...array];
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// ✅ Хелпер для створення питання + автоматичне перемішування
const q = (
  id: string,
  question: string,
  answers: [string, boolean, string, boolean, string, boolean, string, boolean]
): QuestionType => {
  const answerObjs = shuffle([
    { text: answers[0], correct: answers[1] },
    { text: answers[2], correct: answers[3] },
    { text: answers[4], correct: answers[5] },
    { text: answers[6], correct: answers[7] },
  ]);

  return { id, question, answers: answerObjs };
};

export const questionsByCategory: Record<Category, QuestionType[]> = {
  html: [
    q("html-1", "<!DOCTYPE html> — навіщо його вказують?", [
      "Щоб браузер працював у стандартизованому (standards) режимі",
      true,
      "Щоб підключити CSS",
      false,
      "Щоб задати кодування сторінки",
      false,
      "Щоб вказати версію JavaScript",
      false,
    ]),
    q("html-2", "Навіщо використовують meta-теги в HTML?", [
      "Щоб задати метадані сторінки: кодування, viewport, опис, автор тощо",
      true,
      "Щоб змінювати кольори елементів",
      false,
      "Щоб вставляти зображення",
      false,
      "Щоб створити кнопки",
      false,
    ]),
    q("html-3", "Чим відрізняються block та inline елементи?", [
      "Block займає всю ширину і починається з нового рядка; inline — лише ширину контенту, в рядку",
      true,
      "Block є завжди червоного кольору, inline — синього",
      false,
      "Inline займає всю ширину, block — тільки контент",
      false,
      "Block — це HTML-коментарі, inline — теги",
      false,
    ]),
    q("html-4", "Чому деякі символи відображаються як квадрати або питання?", [
      "Через відсутність потрібного шрифту або невідповідність кодування/charset",
      true,
      "Тому що браузер заблокував CSS",
      false,
      "Бо HTML файл пошкоджений",
      false,
      "Через неправильний тег <div>",
      false,
    ]),
    q("html-5", "Що таке семантична верстка?", [
      "Використання тегів, які передають зміст (напр., <header>, <main>, <article>)",
      true,
      "Верстка, що використовує тільки <div>",
      false,
      "Стилі, які працюють без HTML",
      false,
      "Сторінка без JavaScript",
      false,
    ]),
    q("html-6", "Які семантичні теги існують?", [
      "<header>, <nav>, <main>, <article>, <section>, <footer>",
      true,
      "<left>, <right>, <top>, <bottom>",
      false,
      "<box>, <container>",
      false,
      "<grid>, <stack>",
      false,
    ]),
    q("html-7", "Які типи заголовків існують в HTML?", [
      "h1 — h6, використовуються для структурування заголовків",
      true,
      "h1 та h2 тільки",
      false,
      "header1 — header6",
      false,
      "title1 — title6",
      false,
    ]),
    q("html-8", "Що таке document flow?", [
      "Потік документу — звичайне розміщення елементів у документі за замовчуванням",
      true,
      "Це CSS-фреймворк",
      false,
      "JS бібліотека",
      false,
      "Протокол для мережі",
      false,
    ]),
    q("html-9", "Чи можна впливати на document flow?", [
      "Так — за допомогою display, position, float, flex, grid тощо",
      true,
      "Ні — це статично",
      false,
      "Можна тільки через JS",
      false,
      "Лише змінюючи шрифти",
      false,
    ]),
    q(
      "html-10",
      "Різниця між відносною (relative) та абсолютною (absolute) адресою в HTML?",
      [
        "Відносна — відносно поточного документа; абсолютна — повний шлях/URL",
        true,
        "Відносна — завжди починається з https://",
        false,
        "Абсолютна працює тільки з локальними файлами",
        false,
        "Немає різниці",
        false,
      ]
    ),
    q("html-11", "Різниця між тегом і елементом в HTML?", [
      "Тег — синтаксис (<div>), елемент — тег + його вміст/вкладеність",
      true,
      "Тег — це CSS-клас, елемент — HTML-файл",
      false,
      "Тег працює в CSS, елемент — в JS",
      false,
      "Немає різниці",
      false,
    ]),
    q("html-12", "Коли використовувати <button>, а не <a>?", [
      "<button> для дій (відправка форми, інтерфейсні дії); <a> для навігації (посилань)",
      true,
      "<a> завжди кращий для кнопок",
      false,
      "<button> не можна стилізувати",
      false,
      "<a> не можна кліком активувати",
      false,
    ]),
    q("html-13", "Навіщо потрібен атрибут type у <button>?", [
      "type визначає поведінку: button, submit або reset",
      true,
      "Він задає колір кнопки",
      false,
      "Він вказує шрифт",
      false,
      "Нічого не означає",
      false,
    ]),
    q("html-14", "Різниця між checkbox і radio?", [
      "Checkbox дозволяє множинний вибір; radio — тільки один у групі (по name)",
      true,
      "Checkbox — тільки для підтвердження, radio — для форм",
      false,
      "Radio можна вибрати декілька",
      false,
      "Checkbox працює лише в Chrome",
      false,
    ]),
    q("html-15", "Різниця між контентними зображеннями і фоновими?", [
      "<img> — контентні (семантика, accessibility); background-image — декоративні",
      true,
      "background-image кращий для SEO",
      false,
      "<img> не показується в мобільних",
      false,
      "Немає різниці",
      false,
    ]),
    q("html-16", "Чому <img> та <input> не підтримують ::before/::after?", [
      "Тому що ::before/::after — псевдоелементи, які додаються вмісту контейнера; img/input — replaced elements",
      true,
      "Тому що браузери забороняють стилі на них",
      false,
      "Тільки інлайн-елементи підтримують псевдоелементи",
      false,
      "Це відбувається лише в IE",
      false,
    ]),
    q("html-17", "Навіщо використовують meta charset?", [
      "Щоб вказати кодування документа (наприклад, UTF-8) і уникнути неправильних символів",
      true,
      "Щоб підключити стилі",
      false,
      "Щоб викликати JavaScript",
      false,
      "Щоб визначити favicon",
      false,
    ]),
    q("css-1", "Що таке box model?", [
      "Box model = margin → border → padding → content (послідовність шарів)",
      true,
      "Box model — тільки про margin",
      false,
      "Box model — це тип дисплея",
      false,
      "Box model — JS обʼєкт",
      false,
    ]),
    q("css-2", "Що робить box-sizing: border-box?", [
      "Включає padding і border у ширину/висоту елемента",
      true,
      "Позначає елемент як блочний",
      false,
      "Змінює колір бордера",
      false,
      "Вимикає padding",
      false,
    ]),
    q("css-3", "Які типи позиціонування існують?", [
      "static, relative, absolute, fixed, sticky",
      true,
      "left, right, up, down",
      false,
      "inline, block",
      false,
      "grid, flex",
      false,
    ]),
    q("css-4", "За що відповідає z-index?", [
      "За стековий порядок елементів на осі Z (режим шару) при позиціонуванні",
      true,
      "За прозорість елементу",
      false,
      "За ширину елемента",
      false,
      "За відступи між параграфами",
      false,
    ]),
    q("css-5", "Як працює position: absolute?", [
      "Абсолютно позиціонований елемент позиціонується відносно найближчого предка з position !== static",
      true,
      "Він завжди позиціонується відносно body",
      false,
      "Він займає місце в document flow",
      false,
      "Він автоматично стає display:inline",
      false,
    ]),
    q("css-6", "Різниця visibility: hidden vs display: none?", [
      "visibility: hidden — елемент займає місце, але невидимий; display: none — елемент видаляється з flow",
      true,
      "visibility: hidden прибирає елемент з DOM",
      false,
      "display: none робить елемент напівпрозорим",
      false,
      "Немає різниці",
      false,
    ]),
    q("css-7", "Що таке transition?", [
      "CSS-властивість для плавного переходу зміни значень інших властивостей",
      true,
      "JS-бібліотека",
      false,
      "Тип дисплея",
      false,
      "Метод для зміни шрифту",
      false,
    ]),
    q("css-8", "Для чого використовується calc()?", [
      "Щоб комбінувати одиниці й обчислювати значення (наприклад, width: calc(100% - 20px))",
      true,
      "Щоб обчислювати в JS",
      false,
      "Щоб робити math-функції в HTML",
      false,
      "Щоб встановити колір",
      false,
    ]),
    q("css-9", "Що таке flex-контейнер та flex-елементи?", [
      "Flex-контейнер (display:flex) управляє розташуванням дочірніх flex-елементів по осям",
      true,
      "Flex — це тип шрифта",
      false,
      "Flex — це JS API",
      false,
      "Flex автоматично робить елементи кольоровими",
      false,
    ]),
    q("css-10", "Що таке осі у Flexbox?", [
      "Main axis і cross axis — визначають напрям layout та вирівнювання",
      true,
      "X, Y, Z осі у 3D",
      false,
      "Ось тільки у grid",
      false,
      "Flex не має осей",
      false,
    ]),
    q("css-11", "Різниця між adaptive, responsive, fluid версткою?", [
      "Fluid — відсоткові ширини; adaptive — кілька фіксованих макетів під різні ширини; responsive — комбінований підхід з медіа-запитами",
      true,
      "Adaptive — це тільки для мобілок",
      false,
      "Responsive — означає fixed width",
      false,
      "Fluid — використовує тільки px",
      false,
    ]),
    q("css-12", "Яка різниця між reset.css та normalize.css?", [
      "reset.css обнуляє стилі; normalize.css стандартизує та зберігає корисні дефолтні стилі",
      true,
      "reset.css — бібліотека JS",
      false,
      "normalize.css видаляє усі марґіни",
      false,
      "Немає різниці",
      false,
    ]),
    q("css-13", "У чому різниця між rgb, rgba та hex?", [
      "rgb — колір без прозорості; rgba — з альфою; hex — шістнадцяткове представлення",
      true,
      "rgba не підтримується в сучасних браузерах",
      false,
      "hex — тільки для фонів",
      false,
      "rgb — формат аудіо",
      false,
    ]),
    q("css-14", "Що таке @media?", [
      "Медіа-запити для умовного застосування стилів за шириною/пристроєм",
      true,
      "JS-хук",
      false,
      "Селектор для SVG",
      false,
      "Тип шрифту",
      false,
    ]),
  ],

  js: [
    q("js-1", "Які типи даних у JS?", [
      "string, number, boolean, null, undefined, object, symbol, bigint",
      true,
      "string, char, int",
      false,
      "number, text",
      false,
      "float, double",
      false,
    ]),
    q("js-2", "Що таке NaN?", [
      "Спеціальне значення Not-a-Number — результат невдалих числових операцій",
      true,
      "Тип даних для рядків",
      false,
      "Функція Math.NaN()",
      false,
      "Режим налагодження",
      false,
    ]),
    q("js-3", "Різниця == та === ?", [
      "== виконує приведення типів; === порівнює і тип, і значення",
      true,
      "=== приводить типи до числа",
      false,
      "== завжди точніше",
      false,
      "Немає різниці",
      false,
    ]),
    q("js-4", "Різниця між null та undefined?", [
      "undefined — змінна не ініціалізована; null — явне відсутнє значення",
      true,
      "null — означає 0",
      false,
      "undefined — це помилка",
      false,
      "null і undefined — однакові",
      false,
    ]),
    q("js-5", "Як працюють логічні оператори && та ||?", [
      "&& повертає перше falsy або останнє truthy; || повертає перше truthy або останнє falsy",
      true,
      "Вони завжди повертають true/false",
      false,
      "Вони виконують арифметичні операції",
      false,
      "JS не має цих операторів",
      false,
    ]),
    q("js-6", "Що таке 'use strict'?", [
      "Режим, що вмикає суворіші перевірки та заборони у JS (наприклад, заборона неоголошених змінних)",
      true,
      "Назва бібліотеки",
      false,
      "CSS-правило",
      false,
      "Режим безпечного виконання HTML",
      false,
    ]),
    q("js-7", "Різниця між <script>, <script async> і <script defer>?", [
      "<script> блокує парсинг; async завантажує асинхронно та виконує коли завантажиться; defer виконує після парсингу документа",
      true,
      "async виконує після defer",
      false,
      "defer працює тільки в Firefox",
      false,
      "async і defer однакові",
      false,
    ]),
    q("js-8", "Чому порівняння двох однакових об'єктів дає false?", [
      "Тому що об'єкти порівнюються по посиланню; два різні обʼєкти — різні посилання",
      true,
      "Тому що об'єкти не можна порівнювати",
      false,
      "JS помилково повертає false",
      false,
      "Потрібно приводити обʼєкти до числа",
      false,
    ]),
    q("js-9", "Як працює filter у масивах?", [
      "filter повертає новий масив елементів, для яких callback повернув true",
      true,
      "filter змінює оригінальний масив",
      false,
      "filter видаляє всі елементи",
      false,
      "filter повертає число",
      false,
    ]),
    q("js-10", "Що таке event listener?", [
      "Функція, що виконується у відповідь на подію (addEventListener)",
      true,
      "CSS-псевдоклас",
      false,
      "HTML-атрибут тільки",
      false,
      "SQL-запит",
      false,
    ]),
    q("js-11", "Різниця між var, let і const?", [
      "var — функціональна/глобальна область + підняття; let/const — блочна область; const — незмінна прив'язка",
      true,
      "var блочна, let глобальна",
      false,
      "const можна переприсвоювати",
      false,
      "Нема різниці",
      false,
    ]),
    q("js-12", "Як перевірити чи дані — масив?", [
      "Array.isArray(value)",
      true,
      "typeof value === 'array'",
      false,
      "value instanceof Array === false",
      false,
      "value.isArray()",
      false,
    ]),
    q("js-13", "Які перебираючі методи масивів знаєш?", [
      "forEach, map, filter, reduce, some, every, find, findIndex",
      true,
      "iterate, loop",
      false,
      "forIn тільки",
      false,
      "map, filter — це тільки в Python",
      false,
    ]),
    q("js-14", "Чи можна використовувати for...in для масивів?", [
      "Можна, але небажано — ітерує ключі (індекси), може бути повільно/непередбачувано",
      true,
      "for...in кращий за forEach",
      false,
      "for...in не працює з масивами",
      false,
      "for...in автоматично видаляє елементи",
      false,
    ]),
    q("js-15", "Що таке hoisting?", [
      "Підняття оголошень (var, function) на початок області видимості",
      true,
      "Підняття елементів DOM",
      false,
      "JS-метод для сортування масиву",
      false,
      "CSS-властивість",
      false,
    ]),
    q("js-16", "Що таке область видимості (scope)?", [
      "Контекст, де визначені змінні: глобальна, функціональна, блочна (let/const) тощо",
      true,
      "Лише глобальні змінні",
      false,
      "Тільки в браузері",
      false,
      "Просто назва функції",
      false,
    ]),
    q("js-17", "Різниця Function Declaration і Function Expression?", [
      "Function Declaration піднімається; Function Expression — ні (і може бути анонімна)",
      true,
      "Expression завжди працює швидше",
      false,
      "Declaration — це arrow-функція",
      false,
      "Немає різниці",
      false,
    ]),
    q("js-18", "Що таке callback-функція?", [
      "Функція, що передається як аргумент і викликається пізніше",
      true,
      "Функція, що повертає проміс",
      false,
      "Функція без імені",
      false,
      "Функція тільки в React",
      false,
    ]),
    q("js-19", "Чим відрізняється стрілкова функція від звичайної?", [
      "Стрілкова не має свого this, arguments, її не можна використовувати як конструктор",
      true,
      "Стрілкові виконуються повільніше",
      false,
      "Стрілкові мають більше можливостей",
      false,
      "Немає різниці",
      false,
    ]),
    q("js-20", "Чи мають стрілкові функції доступ до arguments?", [
      "Ні — аналога: rest-параметри (...args) або зовнішні змінні",
      true,
      "Так, arguments доступний завжди",
      false,
      "arguments — змінна ES6",
      false,
      "Стрілкові мають arguments як параметр",
      false,
    ]),
    q("js-21", "Як викликати функцію з затримкою 10 секунд?", [
      "setTimeout(() => fn(), 10000)",
      true,
      "delay(fn, 10)",
      false,
      "sleep(10000)",
      false,
      "setInterval(fn, 10)",
      false,
    ]),
    q("js-22", "Що таке closure (замикання)?", [
      "Функція з доступом до змінних зовнішнього лексичного оточення навіть після завершення зовнішньої функції",
      true,
      "Замикання файлу",
      false,
      "Метод масива",
      false,
      "JS-модуль",
      false,
    ]),
    q("js-23", "Які стани може мати Promise?", [
      "pending, fulfilled (resolved), rejected",
      true,
      "open, close",
      false,
      "start, end",
      false,
      "on, off",
      false,
    ]),
    q("js-24", "HTTP-методи: які знаєш?", [
      "GET, POST, PUT, PATCH, DELETE, OPTIONS, HEAD",
      true,
      "READ, WRITE",
      false,
      "FETCH, PUSH",
      false,
      "OPEN, CLOSE",
      false,
    ]),
  ],

  react: [
    q("react-1", "Що таке JSX?", [
      "Синтаксичне розширення JS, що дозволяє писати розмітку у JS і трансформується у React.createElement",
      true,
      "Мова стилів для React",
      false,
      "Фреймворк",
      false,
      "CSS-перехід",
      false,
    ]),
    q("react-2", "Різниця між props і state?", [
      "props — передаються зверху і не змінюються локально; state — внутрішній стан компонента",
      true,
      "props керують стилями",
      false,
      "state передається з батька",
      false,
      "Немає різниці",
      false,
    ]),
    q("react-3", "Що таке key у списках?", [
      "Унікальний ідентифікатор для ефективної реконсиляції елементів списку",
      true,
      "CSS-клас для елементу",
      false,
      "Тип події",
      false,
      "Атрибут для форм",
      false,
    ]),
    q("react-4", "Що таке lifting state up?", [
      "Підняття стану до спільного батьківського компонента для спільного доступу",
      true,
      "Відправка стану в бекенд",
      false,
      "Передача state через props просто так",
      false,
      "Створення глобального state автоматично",
      false,
    ]),
    q("react-5", "Що таке portals?", [
      "Механізм рендерингу дочірніх компонентів у DOM-вузол за межами батьківського компонента",
      true,
      "Новий хук",
      false,
      "CSS-метод",
      false,
      "Тип компонента",
      false,
    ]),
    q("react-6", "Що таке refs і коли їх використовувати?", [
      "refs дають доступ до DOM-елементів або збережених значень між рендерами; використовуються рідко (фокус, вимірювання)",
      true,
      "refs — те саме що props",
      false,
      "refs — global variables",
      false,
      "refs — для стилів",
      false,
    ]),
    q("react-7", "Що таке Context?", [
      "Механізм для передачі даних через дерево компонентів без пропс-дрилінгу",
      true,
      "Тип хуку",
      false,
      "CSS-стиль",
      false,
      "Плагін React",
      false,
    ]),
    q("react-8", "Які хуки знаєш?", [
      "useState, useEffect, useRef, useMemo, useCallback, useContext, useReducer",
      true,
      "useLoop, useTimer",
      false,
      "useClass, useRender",
      false,
      "useHTML",
      false,
    ]),
    q("react-9", "Що робить useEffect і як уникнути зайвих викликів?", [
      "useEffect виконує побічні ефекти; уникнути зайвих викликів допомагають правильні залежності у масиві deps",
      true,
      "useEffect використовується тільки для стилів",
      false,
      "useEffect завжди викликається лише один раз",
      false,
      "useEffect — це синхронна функція",
      false,
    ]),
    q("react-10", "Що таке однонаправлений потік даних (one-way data flow)?", [
      "Дані передаються від батька до дитини через props; дитина не змінює props напряму",
      true,
      "Дані автоматично синхронізуються в обидва боки",
      false,
      "Це властивість CSS",
      false,
      "React має двонаправлений binding за замовчуванням",
      false,
    ]),
    q("react-11", "Що таке React.StrictMode?", [
      "Компонент-обгортка, що допомагає виявити потенційні проблеми (в development виконує деякі методи двічі)",
      true,
      "Режим для продакшну",
      false,
      "Швидкісне прискорення рендеру",
      false,
      "Сховище стану",
      false,
    ]),
    q("react-12", "Що таке memoization (useMemo)?", [
      "Збереження результату обчислень для уникнення повторних дорогих обчислень",
      true,
      "Функція для кешування API",
      false,
      "Зберігання елементів у localStorage",
      false,
      "JS-метод для масивів",
      false,
    ]),
  ],
};
